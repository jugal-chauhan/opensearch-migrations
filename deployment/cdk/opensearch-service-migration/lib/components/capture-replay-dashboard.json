{
    "variables": [
        {
            "type": "property",
            "property": "region",
            "inputType": "input",
            "id": "REGION",
            "label": "Region",
            "defaultValue": "us-east-1",
            "visible": false
        },
        {
            "type": "pattern",
            "pattern": "MA_STAGE",
            "inputType": "input",
            "id": "MA_STAGE",
            "label": "Migration Assistant Stage",
            "defaultValue": "placeholder-stage",
            "visible": false
        },
        {
            "type": "pattern",
            "pattern": "ACCOUNT_ID",
            "inputType": "input",
            "id": "ACCOUNT_ID",
            "label": "Account ID",
            "defaultValue": "ACCOUNT_ID",
            "visible": false
        }
    ],
    "widgets": [
        {
            "height": 1,
            "width": 24,
            "y": 0,
            "x": 0,
            "type": "text",
            "properties": {
                "markdown": "# Capture & Replay Dashboard\nMonitoring metrics for the Capture Proxy and Traffic Replayer services",
                "background": "transparent"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 1,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "capture-proxy", "ClusterName", "migration-MA_STAGE-ecs-cluster", { "region": "REGION", "label": "Capture Proxy CPU Utilization" } ]
                ],
                "region": "REGION",
                "title": "Capture Proxy CPU Utilization",
                "period": 60,
                "stat": "Average"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 1,
            "x": 12,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/ECS", "MemoryUtilization", "ServiceName", "capture-proxy", "ClusterName", "migration-MA_STAGE-ecs-cluster", { "region": "REGION", "label": "Capture Proxy Memory Utilization" } ]
                ],
                "region": "REGION",
                "title": "Capture Proxy Memory Utilization",
                "period": 60,
                "stat": "Average"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 9,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/ECS", "CPUUtilization", "ServiceName", "traffic-replayer", "ClusterName", "migration-MA_STAGE-ecs-cluster", { "region": "REGION", "label": "Traffic Replayer CPU Utilization" } ]
                ],
                "region": "REGION",
                "title": "Traffic Replayer CPU Utilization",
                "period": 60,
                "stat": "Average"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 9,
            "x": 12,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/ECS", "MemoryUtilization", "ServiceName", "traffic-replayer", "ClusterName", "migration-MA_STAGE-ecs-cluster", { "region": "REGION", "label": "Traffic Replayer Memory Utilization" } ]
                ],
                "region": "REGION",
                "title": "Traffic Replayer Memory Utilization",
                "period": 60,
                "stat": "Average"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 17,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/Kafka", "BytesInPerSec", "Cluster Name", "migration-msk-cluster-MA_STAGE", { "region": "REGION", "label": "Kafka Bytes In Per Second" } ]
                ],
                "region": "REGION",
                "title": "Kafka Bytes In Per Second",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 17,
            "x": 12,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "AWS/Kafka", "BytesOutPerSec", "Cluster Name", "migration-msk-cluster-MA_STAGE", { "region": "REGION", "label": "Kafka Bytes Out Per Second" } ]
                ],
                "region": "REGION",
                "title": "Kafka Bytes Out Per Second",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 25,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "OpenSearchMigrations", "CaptureProxyRequestCount", "Stage", "MA_STAGE", { "region": "REGION", "label": "Capture Proxy Request Count" } ]
                ],
                "region": "REGION",
                "title": "Capture Proxy Request Count",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 25,
            "x": 12,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "OpenSearchMigrations", "TrafficReplayerRequestCount", "Stage", "MA_STAGE", { "region": "REGION", "label": "Traffic Replayer Request Count" } ]
                ],
                "region": "REGION",
                "title": "Traffic Replayer Request Count",
                "period": 60,
                "stat": "Sum"
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 33,
            "x": 0,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "OpenSearchMigrations", "CaptureProxyLatency", "Stage", "MA_STAGE", { "region": "REGION", "label": "Capture Proxy Latency (ms)", "stat": "Average" } ],
                    [ "...", { "region": "REGION", "label": "Capture Proxy Latency (ms) - p90", "stat": "p90" } ],
                    [ "...", { "region": "REGION", "label": "Capture Proxy Latency (ms) - p99", "stat": "p99" } ]
                ],
                "region": "REGION",
                "title": "Capture Proxy Latency",
                "period": 60
            }
        },
        {
            "height": 8,
            "width": 12,
            "y": 33,
            "x": 12,
            "type": "metric",
            "properties": {
                "view": "timeSeries",
                "stacked": false,
                "metrics": [
                    [ "OpenSearchMigrations", "TrafficReplayerLatency", "Stage", "MA_STAGE", { "region": "REGION", "label": "Traffic Replayer Latency (ms)", "stat": "Average" } ],
                    [ "...", { "region": "REGION", "label": "Traffic Replayer Latency (ms) - p90", "stat": "p90" } ],
                    [ "...", { "region": "REGION", "label": "Traffic Replayer Latency (ms) - p99", "stat": "p99" } ]
                ],
                "region": "REGION",
                "title": "Traffic Replayer Latency",
                "period": 60
            }
        }
    ]
}
